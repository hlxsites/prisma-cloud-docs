
== Azure Container Registry (ACR) not zone redundant

=== Rule Details

[cols="1,2"]
|===
|Cortex AppSec Rule ID |APPSEC_AZURE_233
|Category |STORAGE - REDUNDANCY
|Provider |AZURE
|Severity |LOW
|Framework |Terraform, Terraform Plan, ARM, Bicep
|Mapped CSPM/KSPM Rule |None
|===


=== Description

This policy checks to ensure that the Azure Container Registry (ACR) is zone redundant, ensuring resource distribution across multiple zones within the same region. Zone redundancy is important as it guarantees high availability and resilience during zone-wide failures. Without zone redundancy, ACR may experience unavailability during zone-specific issues occur, disrupting services relying on it and potentially leading to substantial business disruptions.

=== Fix - Buildtime

*Terraform*

* *Resource:* azurerm_container_registry
* *Arguments:* zone_redundancy_enabled

To fix this issue, in your Azure Container Registry (ACR) resource, set the zone_redundancy_enabled attribute to true.

[source,go]
----
resource "azurerm_container_registry" "acr" {
  ...
  sku                 = "Premium"
  ...
  georeplications {
    ...
    zone_redundancy_enabled = true
  }
}
----

This code enables Azure Container Registry (ACR) zone redundancy, by configuring the zone_redundancy_enabledsetting to 'true'. ACR data will be replicated across different zones within the region, providing highavailability and durability.
