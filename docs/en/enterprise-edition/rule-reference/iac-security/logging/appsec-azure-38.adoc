== Azure Monitor log profile does not capture all activities
// Azure Monitor log profile not configured to collect logs for all categories


=== Rule Details

[width=45%]
|===
|Cortex AppSec Rule ID |APPSEC_AZURE_38
|Category |LOGGING-Disabled or missing
|Provider |AZURE
|Severity |LOW
|Framework |ARM, Terraform, Bicep, Terraform Plan
|Mapped CSPM/KSPM Rule |03a90ea7-d8f5-4761-beb7-ffcc24237741
|===


=== Description 


A log profile controls how the activity log is exported.
Configuring the log profile to collect logs for the categories *Write*, *Delete* and *Action* ensures that all control/management plane activities performed on the subscription are exported.
We recommend you configure the log profile to export all activities from the control/management plane.
////
=== Fix - Runtime


* Azure Portal The Azure portal currently has no provision to check or set categories.* 




* CLI Command* 


To update an existing default log profile, use the following command: `az monitor log-profiles update --name default`
////
=== Fix - Buildtime


*Terraform* 


* *Resource:* azurerm_monitor_log_profile
* *Arguments:* categories


[source,go]
----
resource "azurerm_monitor_log_profile" "example" {
    ...
    categories = [
 +   "Action",
 +   "Delete",
 +   "Write",
    ]
}
----
